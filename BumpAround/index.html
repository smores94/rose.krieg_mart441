<!DOCTYPE html>
<html>
<head>
    <title>Bump Around</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            font-family: Arial, sans-serif;
        }
        #title-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: #222;
        }
        #title-canvas {
            border: 2px solid white;
            margin-bottom: 20px;
        }
        #start-button {
            padding: 10px 30px;
            font-size: 24px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0;
            transition: opacity 1s;
        }
        #game-container {
            position: absolute;
            width: 100%;
            height: 100%;
        }
        #game-canvas {
            display: block;
            background: #f0f0f0;
        }
        #score-display, #timer {
            position: absolute;
            top: 10px;
            font-size: 24px;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        #score-display {
            left: 10px;
        }
        #timer {
            right: 10px;
        }
    </style>
</head>
<body>
    <div id="title-screen">
        <canvas id="title-canvas"></canvas>
        <button id="start-button">START GAME</button>
    </div>
    
    <div id="game-container" style="display:none;">
        <canvas id="game-canvas"></canvas>
        <div id="score-display">Score: 0</div>
        <div id="timer"></div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chromata@latest/dist/chromata.min.js"></script>
    <script>
    // =============== GAME CODE =============== //
    // Game Constants
    const CANVAS_WIDTH = 800;
    const CANVAS_HEIGHT = 600;
    const PLAYER_SIZE = 30;
    const SCORE_INCREMENT = 10;
    const OBSTACLE_PENALTY = 5;

    // Game Variables
    let canvas, ctx;
    let obstacles = [];
    let collectibles = [];
    let player;
    let keys = {};
    let score = 0;

    // TITLE SCREEN SETUP
    function initTitleScreen() {
        const titleCanvas = document.getElementById('title-canvas');
        const startButton = document.getElementById('start-button');
        const gameContainer = document.getElementById('game-container');
        
        // Set canvas size
        titleCanvas.width = 600;
        titleCanvas.height = 300;
        
        // Initialize Chromata
        var imageElement = new Image();
        imageElement.src = 'https://via.placeholder.com/600x300/333/fff?text=Bump+Around';
        
        imageElement.onload = function() {
            var chromata = new Chromata(titleCanvas, imageElement);
            chromata.start({
                particleSize: 2,
                particleGap: 1,
                animationDuration: 3000,
                animationType: 'random'
            });
            
            setTimeout(() => {
                startButton.style.opacity = '1';
                startButton.style.cursor = 'pointer';
            }, 3500);
        };
        
        // Start game button
        startButton.addEventListener('click', function() {
            document.getElementById('title-screen').style.display = 'none';
            gameContainer.style.display = 'block';
            initGame();
        });
    }

    // GAME INITIALIZATION
    function initGame() {
        canvas = document.getElementById('game-canvas');
        ctx = canvas.getContext('2d');
        
        // Set canvas size
        canvas.width = CANVAS_WIDTH;
        canvas.height = CANVAS_HEIGHT;
        
        // Initialize player
        player = new Player(CANVAS_WIDTH/2, CANVAS_HEIGHT/2);
        
        // Generate objects
        generateObstacles();
        generateCollectibles();
        
        // Set up controls
        window.addEventListener('keydown', (e) => keys[e.key] = true);
        window.addEventListener('keyup', (e) => keys[e.key] = false);
        
        // Start game loop
        gameLoop();
    }

    // GAME LOOP
    function gameLoop() {
        ctx.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
        
        // Draw background
        ctx.fillStyle = '#f0f0f0';
        ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
        
        // Update and draw objects
        obstacles.forEach(o => o.draw());
        collectibles.forEach(c => c.draw());
        player.update();
        player.draw();
        
        // Continue loop
        requestAnimationFrame(gameLoop);
    }

    // GAME OBJECT CLASSES
    class GameObject {
        constructor(x, y, width, height) {
            this.x = x;
            this.y = y;
            this.width = width;
            this.height = height;
        }
        
        collidesWith(other) {
            return this.x < other.x + other.width &&
                   this.x + this.width > other.x &&
                   this.y < other.y + other.height &&
                   this.y + this.height > other.y;
        }
    }

    class Player extends GameObject {
        constructor(x, y) {
            super(x, y, PLAYER_SIZE, PLAYER_SIZE);
            this.speed = 5;
            this.color = '#FF0000';
        }
        
        draw() {
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x + this.width/2, this.y + this.height/2, this.width/2, 0, Math.PI * 2);
            ctx.fill();
        }
        
        update() {
            let dx = 0, dy = 0;
            if (keys.ArrowUp) dy -= this.speed;
            if (keys.ArrowDown) dy += this.speed;
            if (keys.ArrowLeft) dx -= this.speed;
            if (keys.ArrowRight) dx += this.speed;
            
            // Diagonal movement
            if (dx !== 0 && dy !== 0) {
                dx *= 0.7071;
                dy *= 0.7071;
            }
            
            // Check boundaries
            const newX = Math.max(0, Math.min(CANVAS_WIDTH - this.width, this.x + dx));
            const newY = Math.max(0, Math.min(CANVAS_HEIGHT - this.height, this.y + dy));
            
            this.x = newX;
            this.y = newY;
        }
    }

    class Obstacle extends GameObject {
        constructor(x, y, width, height) {
            super(x, y, width, height);
            this.color = `hsl(${Math.random() * 360}, 70%, 50%)`;
        }
        
        draw() {
            ctx.fillStyle = this.color;
            ctx.fillRect(this.x, this.y, this.width, this.height);
        }
    }

    class Collectible extends GameObject {
        constructor(x, y) {
            super(x, y, 20, 20);
            this.color = 'gold';
            this.collected = false;
        }
        
        draw() {
            if (this.collected) return;
            ctx.fillStyle = this.color;
            ctx.beginPath();
            ctx.arc(this.x + this.width/2, this.y + this.height/2, this.width/2, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    // HELPER FUNCTIONS
    function generateObstacles() {
        obstacles = [];
        for (let i = 0; i < 15; i++) {
            obstacles.push(new Obstacle(
                Math.random() * (CANVAS_WIDTH - 100),
                Math.random() * (CANVAS_HEIGHT - 100),
                40 + Math.random() * 60,
                40 + Math.random() * 60
            ));
        }
    }

    function generateCollectibles() {
        collectibles = [];
        for (let i = 0; i < 10; i++) {
            collectibles.push(new Collectible(
                Math.random() * (CANVAS_WIDTH - 30),
                Math.random() * (CANVAS_HEIGHT - 30)
            ));
        }
    }

    // START THE GAME
    document.addEventListener('DOMContentLoaded', initTitleScreen);
    </script>
</body>
</html>