<!DOCTYPE html>
<html>
<head>
    <title>3D Pinball - Homework 14</title>
    <style>
        body { margin: 0; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script type="module">
        // CDN IMPORTS
        import * as THREE from 'three: ./master/three.js-master/build/three.module.js';
        import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/controls/OrbitControls.js';
        import { GLTFLoader } from 'https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/loaders/GLTFLoader.js';
        import { FontLoader } from 'https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/loaders/FontLoader.js';
        import { TextGeometry } from 'https://cdn.jsdelivr.net/npm/three@0.164.1/examples/jsm/geometries/TextGeometry.js';
        import * as CANNON from 'https://cdn.jsdelivr.net/npm/cannon-es@0.20.0/dist/cannon-es.js';

        // SCENE SETUP
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // LIGHTS
        const light = new THREE.DirectionalLight(0xffffff, 1);
        light.position.set(5, 10, 5);
        scene.add(light);
        scene.add(new THREE.AmbientLight(0x404040));

        // REQUIREMENT 1: TWO SHAPES
        const geometry1 = new THREE.BoxGeometry(2, 2, 2);
        const material1 = new THREE.MeshStandardMaterial({ color: 0x00ff00 });
        const cube = new THREE.Mesh(geometry1, material1);
        cube.position.set(-5, 5, 0);
        scene.add(cube);

        const geometry2 = new THREE.SphereGeometry(1, 32, 32);
        const material2 = new THREE.MeshStandardMaterial({ color: 0xff0000 });
        const sphere = new THREE.Mesh(geometry2, material2);
        sphere.position.set(5, 5, 0);
        scene.add(sphere);

        // REQUIREMENT 2: CUSTOM MODEL (Using Three.js example model)
        const loader = new GLTFLoader();
        let model;
        loader.load('https://cdn.jsdelivr.net/gh/mrdoob/three.js@r164/examples/models/gltf/Duck/glTF/Duck.gltf',
            (gltf) => {
                model = gltf.scene;
                model.scale.set(0.5, 0.5, 0.5);
                model.position.set(0, 5, 0);
                scene.add(model);
            }
        );

        // REQUIREMENT 3: ROTATION
        function animate() {
            requestAnimationFrame(animate);
            
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;
            
            sphere.rotation.x += 0.02;
            
            if(model) model.rotation.y += 0.015;
            
            renderer.render(scene, camera);
        }

        // REQUIREMENT 4: TEXT
        const fontLoader = new FontLoader();
        fontLoader.load('https://cdn.jsdelivr.net/npm/three@0.164.1/examples/fonts/helvetiker_regular.typeface.json',
            (font) => {
                const textGeometry = new TextGeometry('3D Scene', {
                    font: font,
                    size: 1,
                    height: 0.2
                });
                const textMaterial = new THREE.MeshStandardMaterial({ color: 0xffffff });
                const textMesh = new THREE.Mesh(textGeometry, textMaterial);
                textMesh.position.set(-4, 10, 0);
                scene.add(textMesh);
            }
        );

        // REQUIREMENT 5: LINES
        const points = [];
        points.push(new THREE.Vector3(-10, 0, 0));
        points.push(new THREE.Vector3(10, 0, 0));
        points.push(new THREE.Vector3(0, 0, 10));
        
        const lineGeometry = new THREE.BufferGeometry().setFromPoints(points);
        const lineMaterial = new THREE.LineBasicMaterial({ color: 0x0000ff });
        const line = new THREE.Line(lineGeometry, lineMaterial);
        scene.add(line);

        // CAMERA POSITION
        camera.position.z = 20;
        camera.position.y = 10;
        camera.lookAt(0, 0, 0);

        // START ANIMATION
        animate();
    </script>
</body>
</html>